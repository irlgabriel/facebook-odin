
<div class="d-flex flex-column w-50" style='background-color: #F5F5F5;'>

  <div class='container-fluid bg-white rounded-20'>
    <%= form_for @post do |f| %>
      <%= f.text_field :body, placeholder: 'What is on your mind?', class:'mt-3 form-control form-border bg-light', data: {toggle: 'collapse', target:'#submit-toggler'} %>
      <hr class='my-4'>

      <div id='submit-toggler' class='collapse'>
        <%= f.submit :save, value: 'Post', class:'btn btn-white btn-outline-dark mb-3 w-100' %>
      </div>


    <% end %>
  </div>

  <!-- Small form for post within feed --> 



 <% @posts.each do |post| %>
  
  <div class="card w-100 my-3" style="background-color: white" >
    <div class='card-body'>
      <h5 class='card-title'><%= link_to post.author.first_name + ' ' +  post.author.last_name, profile_path(post.author), class:'font-weight-bold text-dark' %></h5>
      <p class='card-text text-muted'><%= distance_of_time_in_words post.created_at, Time.now %></p>
      <p class='card-text'><%= post.body %></p>

      <% if post.user_id == current_user.id %>

        <div class='post-buttons text-right'>
          <%= link_to 'Edit', edit_post_path(post), class:'lead text-dark' %>
          <%= link_to 'Delete', post, method: :delete, class:'lead text-dark' %>    
        </div>

      <% end %>

        <div class='container-fluid mt-4'>
          <%= form_for post.comments.new, url: post_comments_path(post) do |f| %>
            <%= f.text_field :body, placeholder: 'Write a comment...', class:'bg-light form-control form-border' %>
          <% end %>

          <a data-toggle='collapse' data-target='comments-collapsable'>View Comments</a>
          <div id='comments-collapsable' class='container-fluid'>
            <%= post.comments.each do |comment| %>
            <% end %>
          </div>
        </div>
        
      <% unless post.comments.count == 0 %>
        <%= link_to "#{post.comments.count} Comments", post_path, class:'text-dark' %>
      <% end %>
    
    </div>
  </div>

 <% end %>
</div>